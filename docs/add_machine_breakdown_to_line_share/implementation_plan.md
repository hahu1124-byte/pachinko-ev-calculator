# LINE共有統計への機種内訳追加 実装計画

LINE共有時に送信されるメッセージの「統計」部分に、どの機種を何台打ったかの内訳（機種内訳）を追加します。

## 変更内容

### [share.js](file:///h:/gravity/pachinko-ev-calculator/share.js)

`handleShareLineClick` 関数内の統計メッセージ生成ロジックを修正します。

#### 1. 機種内訳の集計ロジックの追加

各貸玉レートごとの統計ループ内で、そのレートに含まれる機種の出現回数を集計し、文字列（例: `大海5 (2台) / 北斗10 (1台)`）を生成します。

#### 2. メッセージの挿入位置の調整

ユーザーの指示に基づき、日時の表示（`dateStat`）の直後に機種内訳を挿入します。

- **詳細表示モード (`isCompactHistory === true`)**
  現状: `${dateStat}【${rate}円】総投資/...`
  変更後: `${dateStat}${machineInfoText}\n【${rate}円】総投資/...`

- **簡略表示モード (`isCompactHistory === false`)**
  現状: `${dateStat}【${rate}円 統計】\n`
  変更後: `${dateStat}機種内訳: ${machineInfoText}\n【${rate}円 統計】\n`

## 検証プラン

### 手動検証

1. 複数の機種の履歴を保存する（例: 4円パチンコで機種Aを1台、機種Bを1台）。
2. 履歴一覧でそれらをチェックし、LINE共有ボタンを押す。
3. LINEに飛ぶ直前のデバッグ（または実際に送られるテキスト）で、機種内訳が含まれていることを確認する。
   - 詳細モードと簡略モードの両方で確認する。
   - 日時表示の有無によるレイアウト崩れがないか確認する。
